<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
<link href="./css/dice.min.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div>
<canvas id="mainCanvas" style="position:absolute; left:0px; top:0px;"\>
</div>
<div style="position:block; float: right; padding: 5pt;">
<div class="dice__scene" style="position: block; padding: 5pt;">
  <div id="dice__cube" class="show-front dice__cube">
    <div class="dice__side dice__side--front-time"></div>
		<div class="dice__side dice__side--back-time"></div>
		<div class="dice__side dice__side--right-time"></div>
		<div class="dice__side dice__side--left-time"></div>
		<div class="dice__side dice__side--top-time"></div>
		<div class="dice__side dice__side--bottom-time"></div>
  </div>
</div>
<div class="dice__scene" style="position: block; padding: 5pt;">
  <div id="dice__cube" class="show-front dice__cube">
    <div class="dice__side dice__side--front"></div>
		<div class="dice__side dice__side--back"></div>
		<div class="dice__side dice__side--right"></div>
		<div class="dice__side dice__side--left"></div>
		<div class="dice__side dice__side--top"></div>
		<div class="dice__side dice__side--bottom"></div>
  </div>
</div>
<div class="dice__scene" style="position: block; padding: 5pt;">
  <div id="dice__cube" class="show-front dice__cube">
    <div class="dice__side dice__side--front"></div>
		<div class="dice__side dice__side--back"></div>
		<div class="dice__side dice__side--right"></div>
		<div class="dice__side dice__side--left"></div>
		<div class="dice__side dice__side--top"></div>
		<div class="dice__side dice__side--bottom"></div>
  </div>
</div>
<div class="dice__scene" style="position: block; padding: 5pt;">
  <div id="dice__cube" class="show-front dice__cube">
    <div class="dice__side dice__side--front-color"></div>
		<div class="dice__side dice__side--back-color"></div>
		<div class="dice__side dice__side--right-color"></div>
		<div class="dice__side dice__side--left-color"></div>
		<div class="dice__side dice__side--top-color"></div>
		<div class="dice__side dice__side--bottom-color"></div>
  </div>
</div>
<div class="dice__scene" style="position: block; padding: 5pt;">
  <div id="dice__cube" class="show-front dice__cube">
    <div class="dice__side dice__side--front-color"></div>
		<div class="dice__side dice__side--back-color"></div>
		<div class="dice__side dice__side--right-color"></div>
		<div class="dice__side dice__side--left-color"></div>
		<div class="dice__side dice__side--top-color"></div>
		<div class="dice__side dice__side--bottom-color"></div>
  </div>
</div>
<div class="dice__scene" style="position: block; padding: 5pt;">
  <audio preload="auto" id="dice__audio">
  	<source src="./assets/sounds/dice-sound.mp3"></source>
  </audio>
  <!-- /Dice -->
  <button class="demo__button" id="dice__btn">Roll the dice</button>
</div>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8=" crossorigin="anonymous"></script>
<script src="./js/dice.js"></script>
<script>
(function() {
  var
  // Obtain a reference to the canvas element using its id.
  htmlCanvas = document.getElementById('mainCanvas'),

  // Obtain a graphics context on the canvas element for drawing.
  context = htmlCanvas.getContext('2d'),

  // json
  json={
    "images":{
      0:  "burgundy/back-b.jpg",
      1:  "burgundy/1.png",
      2:  "burgundy/2.png",
      3:  "burgundy/3.png",
      4:  "burgundy/4.png",
      5:  "burgundy/5.png",
      6:  "burgundy/6.png",
      7:  "burgundy/7.png",
      8:  "burgundy/8.png",
      9:  "burgundy/9.png",
      10: "burgundy/0.png",
      11: "burgundy/vazio.png",
      12: "burgundy/x.png",
      13: "burgundy/border-1v.png",
      14: "burgundy/border-1.png",
      15: "burgundy/border-2v.png",
      16: "burgundy/border-2.png",
      17: "burgundy/border-2x.png",
      18: "burgundy/np030-00.png",
      19: "burgundy/np030-01.png",
      20: "burgundy/np030-02.png",
      21: "burgundy/np030-03.png",
      22: "burgundy/np030-04.png",
      23: "burgundy/np030-05.png",
      24: "burgundy/np030-06.png",
      25: "burgundy/np030-07.png",
      26: "burgundy/np030-08.png",
      27: "burgundy/np030-09.png",
      28: "burgundy/np030-10.png",
      29: "burgundy/np030-11.png",
      30: "burgundy/np030-12.png",
      31: "burgundy/np030-13.png",
      32: "burgundy/np030-14.png",
      33: "burgundy/np030-15.png",
      34: "burgundy/np030-16.png",
      35: "burgundy/np030-17.png",
      36: "burgundy/np030-18.png",
      37: "burgundy/np030-19.png",
      38: "burgundy/np030-20.png",
      39: "burgundy/np030-21.png",
      40: "burgundy/np030-22.png",
      41: "burgundy/np030-23.png",
      42: "burgundy/np030-24.png",
      43: "burgundy/np030-25.png",
      44: "burgundy/np030-26.png",
      45: "burgundy/np030-27.png",
      46: "burgundy/np030-28.png",
      47: "burgundy/np030-29.png",
      48: "burgundy/np030-30.png",
      49: "burgundy/ng030-00.png",
      50: "burgundy/ng030-01.png",
      51: "burgundy/ng030-02.png",
      52: "burgundy/ng030-03.png",
      53: "burgundy/ng030-04.png",
      54: "burgundy/ng030-05.png",
      55: "burgundy/ng030-06.png",
      56: "burgundy/ng030-07.png",
      57: "burgundy/ng030-08.png",
      58: "burgundy/ng030-09.png",
      59: "burgundy/ng030-10.png",
      60: "burgundy/ng030-11.png",
      61: "burgundy/ng030-12.png",
      62: "burgundy/ng030-13.png",
      63: "burgundy/ng030-14.png",
      64: "burgundy/ng030-15.png",
      65: "burgundy/ng030-16.png",
      66: "burgundy/ng030-17.png",
      67: "burgundy/ng030-18.png",
      68: "burgundy/ng030-19.png",
      69: "burgundy/ng030-20.png",
      70: "burgundy/ng030-21.png",
      71: "burgundy/ng030-22.png",
      72: "burgundy/ng030-23.png",
      73: "burgundy/ng030-24.png",
      74: "burgundy/ng030-25.png",
      75: "burgundy/ng030-26.png",
      76: "burgundy/ng030-27.png",
      77: "burgundy/ng030-28.png",
      78: "burgundy/ng030-29.png",
      79: "burgundy/ng030-30.png"
    },
    "triggers":{
      1:   [450,  82,  [11, 1, 2, 3, 4, 5, 6]],
      2:   [554,  82,  [11, 1, 2, 3, 4, 5, 6]],
      3:   [658,  82,  [11, 1, 2, 3, 4, 5, 6]],
      4:   [762,  82,  [11, 1, 2, 3, 4, 5, 6]],
      5:   [400,  171, [11, 1, 2, 3, 4, 5, 6]],
      6:   [504,  171, [11, 1, 2, 3, 4, 5, 6]],
      7:   [608,  171, [11, 1, 2, 3, 4, 5, 6]],
      8:   [712,  171, [11, 1, 2, 3, 4, 5, 6]],
      9:   [816,  171, [11, 1, 2, 3, 4, 5, 6]],
      10:  [346,  262, [11, 1, 2, 3, 4, 5, 6]],
      11:  [450,  262, [11, 1, 2, 3, 4, 5, 6]],
      12:  [554,  262, [11, 1, 2, 3, 4, 5, 6]],
      13:  [658,  262, [11, 1, 2, 3, 4, 5, 6]],
      14:  [762,  262, [11, 1, 2, 3, 4, 5, 6]],
      15:  [866,  262, [11, 1, 2, 3, 4, 5, 6]],
      16:  [296,  352, [11, 1, 2, 3, 4, 5, 6]],
      17:  [400,  352, [11, 1, 2, 3, 4, 5, 6]],
      18:  [504,  352, [11, 1, 2, 3, 4, 5, 6]],
      19:  [608,  352, [11, 1, 2, 3, 4, 5, 6]],
      20:  [712,  352, [11, 1, 2, 3, 4, 5, 6]],
      21:  [816,  352, [11, 1, 2, 3, 4, 5, 6]],
      22:  [920,  352, [11, 1, 2, 3, 4, 5, 6]],
      23:  [346,  443, [11, 1, 2, 3, 4, 5, 6]],
      24:  [450,  443, [11, 1, 2, 3, 4, 5, 6]],
      25:  [554,  443, [11, 1, 2, 3, 4, 5, 6]],
      26:  [658,  443, [11, 1, 2, 3, 4, 5, 6]],
      27:  [762,  443, [11, 1, 2, 3, 4, 5, 6]],
      28:  [866,  443, [11, 1, 2, 3, 4, 5, 6]],
      29:  [400,  533, [11, 1, 2, 3, 4, 5, 6]],
      30:  [504,  533, [11, 1, 2, 3, 4, 5, 6]],
      31:  [608,  533, [11, 1, 2, 3, 4, 5, 6]],
      32:  [712,  533, [11, 1, 2, 3, 4, 5, 6]],
      33:  [816,  533, [11, 1, 2, 3, 4, 5, 6]],
      34:  [452,  625, [11, 1, 2, 3, 4, 5, 6]],
      35:  [555,  625, [11, 1, 2, 3, 4, 5, 6]],
      36:  [659,  625, [11, 1, 2, 3, 4, 5, 6]],
      37:  [763,  625, [11, 1, 2, 3, 4, 5, 6]],
      38:  [1045, 18,  [11, 12]],
      39:  [1045, 50,  [11, 12]],
      40:  [1045, 82,  [11, 12]],
      41:  [1045, 114, [11, 12]],
      42:  [1045, 146, [11, 12]],
      43:  [1045, 178, [11, 12]],
      44:  [1045, 210, [11, 12]],
      45:  [1045, 242, [11, 12]],
      46:  [1045, 274, [11, 12]],
      47:  [1045, 306, [11, 12]],
      48:  [1133, 18,  [11, 12]],
      49:  [1133, 50,  [11, 12]],
      50:  [1133, 82,  [11, 12]],
      51:  [1133, 114, [11, 12]],
      52:  [1133, 146, [11, 12]],
      53:  [1133, 178, [11, 12]],
      54:  [1133, 210, [11, 12]],
      55:  [1133, 242, [11, 12]],
      56:  [1133, 274, [11, 12]],
      57:  [1133, 306, [11, 12]],
      58:  [1221, 18,  [11, 12]],
      59:  [1221, 50,  [11, 12]],
      60:  [1221, 82,  [11, 12]],
      61:  [1221, 114, [11, 12]],
      62:  [1221, 146, [11, 12]],
      63:  [1221, 178, [11, 12]],
      64:  [1221, 210, [11, 12]],
      65:  [1221, 242, [11, 12]],
      66:  [1221, 274, [11, 12]],
      67:  [1221, 306, [11, 12]],
      68:  [98,   24,  [15, 16, 17]],
      69:  [145,  24,  [15, 16, 17]],
      70:  [98,   72,  [15, 16, 17]],
      71:  [145,  72,  [15, 16, 17]],
      72:  [105,  157, [15, 16, 17]],
      73:  [152,  157, [15, 16, 17]],
      74:  [199,  157, [15, 16, 17]],
      75:  [105,  205, [15, 16, 17]],
      76:  [152,  205, [15, 16, 17]],
      77:  [199,  205, [15, 16, 17]],
      78:  [99,   309, [15, 16, 17]],
      79:  [147,  309, [15, 16, 17]],
      80:  [193,  309, [15, 16, 17]],
      81:  [98,   406, [15, 16, 17]],
      82:  [145,  406, [15, 16, 17]],
      83:  [192,  406, [15, 16, 17]],
      84:  [239,  406, [15, 16, 17]],
      85:  [98,   453, [15, 16, 17]],
      86:  [145,  453, [15, 16, 17]],
      87:  [192,  453, [15, 16, 17]],
      88:  [239,  453, [15, 16, 17]],
      89:  [112,  527, [15, 16, 17]],
      90:  [160,  527, [15, 16, 17]],
      91:  [112,  575, [15, 16, 17]],
      92:  [160,  575, [15, 16, 17]],
      93:  [260,  121, [15, 16]],
      94:  [315,  121, [15, 16]],
      95:  [895,  121, [15, 16]],
      96:  [948,  121, [15, 16]],
      97:  [253,  629, [15, 16]],
      98:  [310,  629, [15, 16]],
      99:  [256,  68,  [13, 14]],
      100: [311,  68,  [13, 14]],
      101: [891,  68,  [13, 14]],
      102: [945,  68,  [13, 14]],
      103: [249,  575, [13, 14]],
      104: [306,  575, [13, 14]],
      105: [1007, 549, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      106: [1007, 584, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      107: [1007, 619, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      108: [1007, 654, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      109: [1046, 514, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      110: [1046, 549, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      111: [1046, 584, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      112: [1046, 619, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      113: [1046, 654, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      114: [1092, 514, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      115: [1092, 549, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      116: [1092, 584, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      117: [1092, 619, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      118: [1092, 654, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      119: [1131, 514, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      120: [1131, 549, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      121: [1131, 584, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      122: [1131, 619, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      123: [1131, 654, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      124: [1176, 514, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      125: [1176, 549, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      126: [1176, 584, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      127: [1176, 619, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      128: [1176, 654, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      129: [1216, 514, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      130: [1216, 549, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      131: [1216, 584, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      132: [1216, 619, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      133: [1216, 654, [18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48]],
      134: [886,  574, [49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79]]
    },
    status: {}
  };

  // Load images
  imgArray = new Array();
  currentLoadedImages=0;
  totalImages = Object.keys(json["images"]).length;
  for (key in json["images"]) {
    imgArray[key] = new Image();
    imgArray[key].src = json["images"][key];
    imgArray[key].onload = function(e) {
      currentLoadedImages++;
      if (currentLoadedImages == totalImages) {
        // Start listening to resize events and draw canvas.
        initialize();
      }
    }
  }

  // Create status
  for (key in json["triggers"]) {
    json["status"][key] = 0;
  }

  function initialize() {
    // Register an event listener to call the resizeCanvas() function
    // each time the window is resized.
    window.addEventListener('resize', resizeCanvas, false);

    // Draw canvas border for the first time.
    resizeCanvas();

    htmlCanvas.addEventListener('mousedown', function(e) {
      var delta;
      if (event.button == 0) {
        delta = 1;
      } else if (event.button == 2) {
        delta = -1;
      } else {
        delta = 0
      }

      changeStatus(htmlCanvas, e, delta);
    });

    // Add wheel event
    htmlCanvas.addEventListener("onwheel" in document ? "wheel" : "mousewheel", function(e) {
      // deltaY for wheel event
      // wheelData for mousewheel event
      var delta = e.deltaY ? -e.deltaY : e.wheelDelta;
      if (delta > 0) {
        delta = 1;
      } else if (delta < 0) {
        delta = -1;
      }

      changeStatus(htmlCanvas, e, delta);
    });

    htmlCanvas.oncontextmenu = function (e) {
      e.preventDefault();
    };
  }

  // get cursor position
  function changeStatus(canvas, event, delta) {
    const rect = canvas.getBoundingClientRect();
    const x = (event.clientX - rect.left)/scale;
    const y = (event.clientY - rect.top)/scale;
    for (key in json["triggers"]) {
      i=json["triggers"][key][2][json["status"][key]]
      if (x >= json["triggers"][key][0] &&
          y >= json["triggers"][key][1] &&
          x <= json["triggers"][key][0] + imgArray[i].width &&
          y <= json["triggers"][key][1] + imgArray[i].height) {
        json["status"][key] += delta;
        if (json["status"][key] == json["triggers"][key][2].length) {
          json["status"][key] = 0;
        };
        if (json["status"][key] == -1) {
          json["status"][key] += json["triggers"][key][2].length;
        }
        redraw();
      }
    }
  }

  // Display custom canvas. In this case it's a blue, 5 pixel
  // border that resizes along with the browser window.
  function redraw() {
     context.strokeStyle = 'blue';
     context.lineWidth = '5';
     context.strokeRect(0, 0, window.innerWidth, window.innerHeight);
     context.drawImage(imgArray[0], 0, 0, imgArray[0].width * scale, imgArray[0].height * scale);
     for (key in json["triggers"]) {
       x=json["triggers"][key][0]
       y=json["triggers"][key][1]
       i=json["triggers"][key][2][json["status"][key]]
       context.drawImage(imgArray[i], x * scale, y * scale, imgArray[i].width * scale, imgArray[i].height * scale)
     }
  }

  // Runs each time the DOM window resize event fires.
  // Resets the canvas dimensions to match window,
  // then draws the new borders accordingly.
  function resizeCanvas() {
      htmlCanvas.width = window.innerWidth;
      htmlCanvas.height = window.innerHeight;
      scale=Math.min(window.innerWidth/imgArray[0].width, window.innerHeight/imgArray[0].height);
      redraw();
  }
})();
</script>
</body>
</html>
